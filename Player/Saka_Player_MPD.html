<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dooplay Shaka Player Embed</title>

<!-- Shaka Player UI CSS -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/controls.min.css">

<style>
body, html {
    margin: 0;
    padding: 0;
    background: #000;
    height: 100%;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

#player-container {
    width: 100%;
    max-width: 100%;
    aspect-ratio: 16/9;
    position: relative;
    background: black;
}

video.shaka-video {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: black;
}

/* Ensure Shaka controls visible above theme elements */
.shaka-controls-container {
    z-index: 9999 !important;
    background: transparent !important;
}

.shaka-controls-button-panel button {
    display: inline-block !important;
}
</style>
</head>
<body>
    

<div id="player-container">
    <video id="video" autoplay playsinline class="shaka-video"></video>
    <div class="shaka-controls-container"></div>
</div>

<!-- Shaka Player JS   //clearKeys: {  
          "ae7076b647133606b704d33e4cef5134": "810251515584cf71216d9a2d1ebf04bb"   -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/shaka-player.ui.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async () => {
    const video = document.getElementById('video');
    const container = document.getElementById('player-container');

    // Initialize Shaka Player
    const player = new shaka.Player(video);

    player.addEventListener('error', e => console.error('Error code', e.detail.code, 'object', e.detail));

    // Attach UI overlay
    const ui = new shaka.ui.Overlay(player, container, video);

    // Configure control panel (time/duration অপশন রিমুভ করা হয়েছে)
    ui.configure({
        controlPanelElements: [
            'play_pause',       // Left
            'time_and_duration',
            'mute',
            'volume',
            'spacer',
            'settings',         // Right: gear icon
            'quality',
            'playback_rate',
            'picture_in_picture',
            'fullscreen'
        ],
        settingsMenuElements: [
            'quality',
            'playback_rate'
        ]
    });

    // DRM ClearKey (example)
    player.configure({
        drm: {
            clearKeys: {
                'a6dfc4f17d70d8d07639659193f03b25': '893eacfabe386144b81733d622a7ad17'
            }
        },
        abr: { enabled: true } // Auto resolution
    });



    // DASH manifest
    const manifestUri = 'https://live2.shoq.com.pk/live/eds/ICC_Women_World_Cup_2025/DASH/ICC_Women_World_Cup_2025.mpd';

    try {
        await player.load(manifestUri);
        console.log('✅ Stream loaded successfully');
    } catch (error) {
        console.error('❌ Error loading stream:', error);
    }
});
</script>

</body>
</html>
