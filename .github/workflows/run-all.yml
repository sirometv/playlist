name: üéõÔ∏è Master Controller

on:
  schedule:
    - cron: '*/10 * * * *'  # ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ßß‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá
  workflow_dispatch:  # ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø ‡¶ö‡¶æ‡¶≤‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶¨‡ßá
    inputs:
      workflow_name:
        description: 'Specific workflow to run (leave empty for all)'
        required: false
        type: string

jobs:
  trigger-all-workflows:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check what workflows we have
        run: |
          echo "üìã Available workflow files:"
          ls -la .github/workflows/*.yml
          echo ""
          
          # Count total workflows
          TOTAL=$(ls .github/workflows/*.yml 2>/dev/null | wc -l || echo 0)
          echo "Total workflows: $TOTAL"
      
      - name: Trigger AllChannel workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: AllChannelüîÑ.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Ayna TV workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Ayna TV üîÑ.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger CRICHD JSON workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: CRICHD JSON üü§.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Combined Playlist Skipper workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Combined Playlist Skipper üîÑ.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger CricHD workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: CricHD üí†.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Fancode JSON Data workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Fancode JSON Data ‚úîÔ∏è.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Fancode to M3U8 workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Fancode to M3U8.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Fancode-BD-IND workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Fancode-BD-IND.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger LiveFancode workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: LiveFancodeüîÑüîÑ.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Sirome TV workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Sirome TV üü¢.yml
          wait_workflow: true
          wait_interval: 30
          
      - name: Wait 10 seconds
        run: sleep 10
        if: always()
      
      - name: Trigger Yupp TV workflow
        uses: convictional/trigger-workflow-and-wait@v1.6.0
        with:
          owner: sirometv
          repo: playlist
          github_token: ${{ secrets.GITHUB_TOKEN }}
          workflow_file_name: Yupp TV üÜï.yml
          wait_workflow: true
          wait_interval: 30
      
      - name: Final report
        run: |
          echo ""
          echo "========================================"
          echo "        üéâ ALL WORKFLOWS TRIGGERED     "
          echo "========================================"
          echo ""
          echo "‚úÖ Successfully triggered all 11 workflows!"
          echo ""
          echo "üìÖ Next auto-run: In 10 minutes"
          echo "üîÑ Manual run: Available anytime"
          echo ""
          echo "Your playlists will now update automatically!"
